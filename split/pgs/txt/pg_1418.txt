trees. In summary, their approach first discretises the continuous space of geographical coordinates using a k -d tree such that each sub-region (leaf) has similar numbers of users. This results in many small regions for areas of high population density and fewer larger regions for country areas with low population density. Next, they use these regions as class labels to train a logistic regression model ("LR"). Our work is also subject to a sparse l1 regularisation penalty (Tibshirani, 1996). In their work, Wing and Baldridge (2014) showed that hierarchical logistic regression with a beam search achieves higher results than logistic regression over a flat label set, but in this research, we use a flat representation, and leave experiments with hierarchical classification to future work. For our experiments, the number of users in each region was selected from {300, 600, 900, 1200} to optimise median error distance on the development set, resulting in values of 300, 600 and 600 for G EO T EXT, T WITTER -US and T WITTER -W ORLD, respectively. The l1 regularisation coefficient was also optimised in the same manner. As features, we used a bag of unigrams (over both words and @-mentions) and removed all features that occurred in fewer than 10 documents, following Wing and Baldridge (2014). The features for each user were weighted using tf-idf, followed by per-user l2 normalisation. The normalisation is particularly important because our `documents' are formed from all the tweets of each user, which vary significantly in size between users; furthermore, this adjusts for differing degrees of lexical variation (Lee, 1995). The number of features was almost 10K for G EOT EXT and about 2.5M for the other two corpora. For evaluation we use the median of all training locations in the sub-region predicted by the classifier, from which we measure the error against a test user's gold standard location. 4.2 Network-based Label Propagation Next, we consider the approach of Jurgens (2013) who used label propagation ("LP"; Zhu and Ghahramani (2002)) to infer user locations using social network structure. Jurgens (2013) defined an undirected network from interactions among Twitter users based on @-mentions in their tweets, a mechanism typically used for conversations between 1364

G EOT EXT User mentions Disconnected test users: 109K 23.5%

T WITTER -US 3.63M 27.7%

T WITTER -W ORLD 16.8M 2.36%

Table 1: The graph size and proportion of test users disconnected from training users for each dataset.

friends. Consequently these links often correspond to offline friendships, and accordingly the network will exhibit a high degree of location homophily. The network is constructed by defining as nodes all users in a dataset (train and test), as well as other external users mentioned in their tweets. Unlike Jurgens (2013) who only created edges when both users mentioned one another, we created edges if either user mentioned the other. For the three datasets used in our experiments, bi-directional mentions were too rare to be useful, and we thus used the (weaker) uni-directional mentions as undirected edges instead. The edges between users are undirected and weighted by the number of @-mentions in tweets by either user.1 The mention network statistics for each of our datasets is shown in Table 1.2 Following Jurgens (2013), we ran the label propagation algorithm to update the location of each non-training node to the weighted median of its neighbours. This process continues iteratively until convergence, which occurred at or before 10 iterations. 4.3 A Hybrid Method

Unfortunately many test users are not transitively connected to any training node (see Table 1), meaning that LP fails to assign them any location. This can happen when users don't use @-mentions, or when a set of nodes constitutes a disconnected component of the graph. In order to alleviate this problem, we use the text for each test user in order to estimate their location, which is then used as an initial estimation during label propagation. In this hybrid approach, we first
1 As our datasets don't have tweets for external users, these nodes do not contribute to the weight of their incident edges. 2 Note that @-mentions were removed in the published T WITTER -US and T WITTER -W ORLD datasets. To recover these we rebuilt the corpora from the Twitter archive.

